<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>PBS Finance | Home (Calculator Rules)</title>

	<!-- favicons -->
	<link rel="apple-touch-icon" sizes="180x180" href="assets/images/favicons/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicons/favicon-16x16.png">

	<!-- vendor css -->
	<link rel="stylesheet" href="assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
	<link rel="stylesheet" href="assets/css/swiper.min.css">
	<link rel="stylesheet" href="assets/css/animate.min.css">
	<link rel="stylesheet" href="assets/css/pylon-icons.css">
	<link rel="stylesheet" href="assets/css/odometer.min.css">
	<link rel="stylesheet" href="assets/css/magnific-popup.css">
	<link rel="stylesheet" href="assets/css/bootstrap-select.min.css">
	<link rel="stylesheet" href="assets/css/nouislider.min.css">
	<link rel="stylesheet" href="assets/css/nouislider.pips.css">
	<link rel="stylesheet" href="assets/css/flaticon.css">
	<link rel="stylesheet" href="assets/css/owl.carousel.min.css">
	<link rel="stylesheet" href="assets/css/pylon-two-icons.css">
	<link rel="stylesheet" href="assets/css/jquery-ui.css">
	<link rel="stylesheet" href="assets/css/custom-animation.css">
	<link rel="stylesheet" href="assets/css/main.css">
	<link rel="stylesheet" href="assets/css/pbs-app.css">

	<style>
		/* Editable calculator inputs */
		.loan-edit-input {
			width: 100%;
			max-width: 220px;
			border-radius: 12px;
			border: 1px solid #d9e2ec;
			padding: 6px 10px;
			font-size: 14px;
			margin-top: 6px;
			color: #3B4A54;
		}
		.loan-edit-input:focus {
			outline: none;
			border-color: #B5E480;
			box-shadow: 0 0 0 2px rgba(181, 228, 128, 0.35);
		}

		/* Small warning text */
		.calc-warning { color:#ad2e2e; font-size: 0.95rem; margin-top:6px; display:none; }

		/* label tweak for Monthly Installment */
		.loan-calculator-two__form__emi span { font-weight:600; font-size:1.05rem; color:#ffffff; }
		.loan-calculator-two__form__emi b { font-weight:800; color:#B5E480; }

		/* keep layout consistent */
	</style>
</head>
<body class="has-sticky-offset">
	<div class="preloader">
		<img class="preloader__image" src="assets/images/loader.png" alt="">
	</div>
	<div class="page-wrapper">
		<div class="main-header-two">
			<div class="topbar-two"></div>
			<div class="main-header-two__info">
				<div class="container">
					<div class="main-header-two__info__inner">
						<div class="logo-box">
							<a href="index.html" aria-label="logo image"><img src="assets/images/logo-dark.png" width="155" alt=""></a>
							<span class="fa fa-bars mobile-nav__toggler"></span>
						</div><!-- /.logo-box -->

						<nav class="main-header-two__menu main-menu">
							<div class="container">
								<ul class="main-menu__list">
									<li class="dropdown"><a href="index.html">Home</a></li>
									<li class="dropdown"><a href="apply_for_a_loan.html">Apply for a Loan</a></li>
									<li><a href="#footer">Contact Support</a></li>
									<a href="login.html" class="header-login-btn">Login</a>
								</ul>
							</div>
						</nav>

					</div><!-- /.main-header-two__info__inner -->
				</div><!-- /.container -->
			</div><!-- /.main-header-two__info -->

		</div>

		<div class="stricky-header stricked-menu main-header-two__menu main-menu">
			<div class="sticky-header__content"></div>
		</div>

		<section class="loan-calculator-two">
			<div class="container">
				<br>
				<div class="loan-calculator-two__shape-2 float-bob-x"></div>

				<div class="loan-calculator-two__inner wow fadeInUp" data-wow-duration="1500ms">
					<div class="row">
						<div class="col-lg-6">
							<div class="sec-title-two text-start">
								<span class="sec-title-two__tagline">
									<i class="fa fa-star"></i>
									<span>Loan Calculator</span>
								</span>
								<h2 class="sec-title-two__title ">Customize Your Plan</h2>
							</div>

							<div class="loan-slider-box">
								<!-- Loan Amount -->
								<div class="single-loan-slider">
									<div class="single-loan-slider__top">
										<h4>Loan Amount</h4>
										<div class="single-loan-counter">
											<span>R</span>
											<span id="pricipal">10,000</span>
										</div>
										<input type="number" id="pricipal-input" class="loan-edit-input"
											min="0" max="10000" step="100" value="10000" aria-label="Loan Amount">
										<div id="pricipal-warning" class="calc-warning">Maximum loan amount is R10,000 — amount adjusted.</div>
									</div>
									<div id="pricipal-slide"
										class="ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content">
										<div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min"></div>
										<span tabindex="0" class="ui-slider-handle ui-corner-all ui-state-default"></span>
									</div>
									<div class="single-loan-slider__bottom">
										<span>R0</span>
										<span>R10,000</span>
									</div>
								</div>

								<!-- Loan Months -->
								<div class="single-loan-slider">
									<div class="single-loan-slider__top">
										<h4>Loan Months</h4>
										<div class="single-loan-counter">
											<span id="totalyear">6</span>
											<span>Months</span>
										</div>
										<input type="number" id="totalyear-input" class="loan-edit-input"
											min="1" max="6" step="1" value="6" aria-label="Loan Months">
										<div id="months-warning" class="calc-warning">Maximum term is 6 months — value adjusted.</div>
									</div>
									<div id="totalyear-slide"
										class="ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content">
										<div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min"></div>
										<span tabindex="0" class="ui-slider-handle ui-corner-all ui-state-default"></span>
									</div>
									<div class="single-loan-slider__bottom">
										<span>1</span>
										<span>6</span>
									</div>
								</div>

								<!-- Interest Rate (Not editable) -->
								<div class="single-loan-slider">
									<div class="single-loan-slider__top">
										<h4>Interest Rate</h4>
										<div class="single-loan-counter">
											<span id="intrest">28.5</span>
											<span>%</span>
										</div>
										<input type="number" id="intrest-input" class="loan-edit-input"
											min="28.5" max="28.5" step="0.1" value="28.5" aria-label="Interest Rate" disabled>
										<div class="calc-warning" style="display:block;color:#4a5560;font-size:0.95rem;margin-top:6px;">
											Interest is fixed at <strong>28.5%</strong> (non-editable).
										</div>
									</div>
									<div id="intrest-slide"
										class="ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content">
										<div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min"></div>
										<span tabindex="0" class="ui-slider-handle ui-corner-all ui-state-default"></span>
									</div>
									<div class="single-loan-slider__bottom">
										<span>28.5%</span>
										<span>28.5%</span>
									</div>
								</div>

								<p class="loan-calculator-two__text">
									*These calculators are provided only as general self-help Planning Tools.
									Results depend on other factors.
								</p>
							</div>
						</div><!-- /.col-lg-6 -->

						<div class="col-lg-6">
							<div id="loan-calculator-1" data-interest-rate="28.5" class="loan-calculator-two__form">
								<span class="sec-title-two__tagline">
									<i class="fa fa-star"></i>
									<span>How Much You Need</span>
								</span>
								<div class="loan-calculator-two__form__calculation">
									<div class="loan-calculator-two__form__emi">
										<span>Monthly Installment:</span>
										<b>R <i id="emi">2,385.00</i></b>
									</div>
									<p>
										<span>Total Interest</span>
										<b>R <i id="tbl_emi">2,850.00</i></b>
									</p>
									<p>
										<span>Total Amount Payable</span>
										<b>R <i id="tbl_la">14,310.00</i></b>
									</p>
									<p>
										<span>Total Months</span>
										<b><i id="t_m">6</i> Months</b>
									</p>

									<!-- extra breakdown so user sees fees -->
									<div style="margin-top:14px;border-top:1px solid rgba(255,255,255,0.08);padding-top:12px;color:#dbe7ef;">
										<p style="margin:0;"><small>Initiation Fee:</small> <strong>R <span id="init_fee">1,050.00</span></strong></p>
										<p style="margin:0;"><small>Service Fee (per month):</small> <strong>R <span id="service_fee">60.00</span></strong></p>
										<p style="margin:0;"><small>Credit Protection (fixed):</small> <strong>R <span id="credit_fee">50.00</span></strong></p>
									</div>
								</div>

								<a href="apply_for_a_loan.html" class="thm-btn">Apply For Loan</a>
							</div>
						</div><!-- /.col-lg-6 -->
					</div><!-- /.row -->
				</div><!-- /.loan-calculator-two__inner -->

			</div><!-- /.container -->
		</section><!-- /.loan-calculator-two -->

		<!-- rest of page kept unchanged (slider + footer) -->
		<section class="main-slider main-slider-two">
			<div class="swiper-container thm-swiper__slider" data-swiper-options='{
			        "slidesPerView": 1,
			        "loop": true,
			        "effect": "fade",
			        "autoplay": {
			            "delay": 5000
			        },
			        "navigation": {
			            "nextEl": "#main-slider__swiper-button-next",
			            "prevEl": "#main-slider__swiper-button-prev"
			        }
			    }'>
				<div class="swiper-wrapper">
					<div class="swiper-slide">
						<div class="image-layer" style="background-image: url(assets/images/update-20-12-2022/resources/slider-1-1.jpg);"></div>
						<div class="container-fluid">
							<div class="row">
								<div class="col-xl-6 col-lg-6">
									<p>Trusted and Secure Payment Proccess</p>
									<h2>A Quick, Secure <br> And Transparent <br> <span>Process</span></h2>
									<div class="main-slider-two__text">
										Lorem ipsum dolor sit amet, consectetur adipiscing elit adipiscing elit.
									</div>
									<a href="apply_for_a_loan.html" class=" thm-btn">Apply For Loan</a>
								</div>
							</div>
						</div>
					</div><!-- /.swiper-slide -->
					<div class="swiper-slide">
						<div class="image-layer" style="background-image: url(assets/images/update-20-12-2022/resources/slider-1-2.jpg);"></div>
						<div class="container-fluid">
							<div class="row">
								<div class="col-xl-6 col-lg-6">
									<p>Trusted and Secure Payment Proccess</p>
									<h2>A Quick, Secure <br> And Transparent <br> <span>Process</span></h2>
									<div class="main-slider-two__text">
										Lorem ipsum dolor sit amet, consectetur adipiscing elit adipiscing elit.
									</div>
									<a href="apply_for_a_loan.html" class=" thm-btn">Apply For Loan</a>
								</div>
							</div>
						</div>
					</div><!-- /.swiper-slide -->
					<div class="swiper-slide">
						<div class="image-layer" style="background-image: url(assets/images/update-20-12-2022/resources/slider-1-3.jpg);"></div>
						<div class="container-fluid">
							<div class="row">
								<div class="col-xl-6 col-lg-6">
									<p>Trusted and Secure Payment Proccess</p>
									<h2>A Quick, Secure <br> And Transparent <br> <span>Process</span></h2>
									<div class="main-slider-two__text">
										Lorem ipsum dolor sit amet, consectetur adipiscing elit adipiscing elit.
									</div>
									<a href="apply_for_a_loan.html" class=" thm-btn">Apply For Loan</a>
								</div>
							</div>
						</div>
					</div><!-- /.swiper-slide -->
				</div><!-- /.swiper-wrapper -->
			</div><!-- /.swiper-container -->
		</section><!-- /.main-slider -->

		<footer id="footer" class="site-footer-two">
			<div class="site-footer-two__bottom">
				<div class="container">
					<p>© Copyright 2025 PBS Finance</p>
				</div>
			</div>
		</footer>

	</div><!-- /.page-wrapper -->

	<!-- mobile nav (unchanged) -->
	<div class="mobile-nav__wrapper">
		<div class="mobile-nav__overlay mobile-nav__toggler"></div>
		<div class="mobile-nav__content">
			<span class="mobile-nav__close mobile-nav__toggler"></span>
			<div class="logo-box">
				<a href="index.html" aria-label="logo image"><img src="assets/images/logo-light.png" width="155" alt="" /></a>
			</div>
			<div class="mobile-nav__container"></div>
			<ul class="mobile-nav__contact list-unstyled">
				<li><i class="pylon-icon-email1"></i><a href="mailto:info@phekhubusiness.co.za">info@phekhubusiness.co.za</a></li>
				<li><i class="pylon-icon-telephone"></i><a href="tel:+27630683230">(+27) 63 068 3230</a></li>
			</ul>
			<div class="mobile-nav__top">
				<div class="mobile-nav__language">
					<img src="assets/images/resources/flag-1-1.jpg" alt="">
					<label class="sr-only" for="language-select">select language</label>
					<select class="selectpicker" id="language-select">
						<option value="english">English</option>
						<option value="arabic">Arabic</option>
					</select>
				</div>
				<div class="mobile-nav__social">
					<a href="#" aria-label="twitter"><i class="fab fa-twitter"></i></a>
					<a href="#" aria-label="facebook"><i class="fab fa-facebook-square"></i></a>
					<a href="#" aria-label="instagram"><i class="fab fa-instagram"></i></a>
				</div>
			</div>
		</div>
	</div>

	<a href="#" data-target="html" class="scroll-to-target scroll-to-top"><i class="fa fa-angle-up"></i></a>

	<!-- Vendor JS (keep in same order) -->
	<script src="assets/js/jquery-3.5.1.min.js"></script>
	<script src="assets/js/bootstrap.bundle.min.js"></script>
	<script src="assets/js/swiper.min.js"></script>
	<script src="assets/js/jquery.ajaxchimp.min.js"></script>
	<script src="assets/js/jquery.magnific-popup.min.js"></script>
	<script src="assets/js/jquery.validate.min.js"></script>
	<script src="assets/js/bootstrap-select.min.js"></script>
	<script src="assets/js/wow.js"></script>
	<script src="assets/js/odometer.min.js"></script>
	<script src="assets/js/jquery.appear.min.js"></script>
	<script src="assets/js/wNumb.min.js"></script>
	<script src="assets/js/nouislider.min.js"></script>
	<script src="assets/js/owl.carousel.min.js"></script>
	<script src="assets/js/jquery.circleGraph.js"></script>
	<script src="assets/js/jquery-ui.js"></script>
	<script src="assets/js/loan-calculator.js"></script>
	<script src="assets/js/theme.js"></script>

	<!-- Editable calculator logic implementing the business rules -->
	<script>
		(function () {
			// Business rule constants
			const MAX_PRINCIPAL = 10000;
			const FIXED_INTEREST_RATE = 28.5; // percent (flat)
			const MAX_MONTHS = 6;
			const INITIATION_FEE = 1050.00;
			const SERVICE_FEE_PER_MONTH = 60.00;
			const CREDIT_PROTECTION_FEE = 50.00;

			function parseNumber(str, fallback) {
				var n = parseFloat(String(str).replace(/,/g, ''));
				return isNaN(n) ? fallback : n;
			}
			function formatMoney(n) {
				return Number(n).toLocaleString('en-ZA', {minimumFractionDigits: 2, maximumFractionDigits: 2});
			}

			// clamp helpers and show warnings
			function clampPrincipal(value) {
				if (value > MAX_PRINCIPAL) return MAX_PRINCIPAL;
				if (value < 0) return 0;
				return value;
			}
			function clampMonths(value) {
				if (value > MAX_MONTHS) return MAX_MONTHS;
				if (value < 1) return 1;
				return Math.round(value);
			}

			function recalc() {
				// Inputs
				var pInput = document.getElementById('pricipal-input');
				var mInput = document.getElementById('totalyear-input');
				var rInput = document.getElementById('intrest-input');

				var principal = parseNumber(pInput.value, 0);
				var months = parseNumber(mInput.value, 0);
				var rateYear = FIXED_INTEREST_RATE; // fixed

				// Enforce caps and show warnings if user tried to go beyond allowed values
				var clampedPrincipal = clampPrincipal(principal);
				if (clampedPrincipal !== principal) {
					document.getElementById('pricipal-warning').style.display = 'block';
					principal = clampedPrincipal;
					pInput.value = clampedPrincipal;
				} else {
					document.getElementById('pricipal-warning').style.display = 'none';
				}

				var clampedMonths = clampMonths(months);
				if (clampedMonths !== months) {
					document.getElementById('months-warning').style.display = 'block';
					months = clampedMonths;
					mInput.value = clampedMonths;
				} else {
					document.getElementById('months-warning').style.display = 'none';
				}

				// Update counters in UI
				document.getElementById('pricipal').textContent = principal.toLocaleString('en-ZA');
				document.getElementById('totalyear').textContent = months.toString();
				document.getElementById('intrest').textContent = rateYear.toString();

				// Calculation: flat interest (principal * 28.5%)
				var interest = principal * (rateYear / 100.0);

				// Fees
				var initiation = INITIATION_FEE;
				var serviceTotal = SERVICE_FEE_PER_MONTH * months;
				var creditProtection = CREDIT_PROTECTION_FEE;

				// Total payable (principal + interest + fees)
				var total = principal + interest + initiation + serviceTotal + creditProtection;

				// Monthly installment (total / months) — if months is 0 (shouldn't be), avoid division by zero
				var monthlyInstallment = months > 0 ? total / months : total;

				// Update UI
				document.getElementById('tbl_emi').textContent = formatMoney(interest);
				document.getElementById('init_fee').textContent = formatMoney(initiation);
				document.getElementById('service_fee').textContent = formatMoney(SERVICE_FEE_PER_MONTH);
				document.getElementById('credit_fee').textContent = formatMoney(creditProtection);
				document.getElementById('tbl_la').textContent = formatMoney(total);
				document.getElementById('emi').textContent = formatMoney(monthlyInstallment);
				document.getElementById('t_m').textContent = months.toString();

				// Sync sliders (if jQuery UI slider exists)
				if (window.jQuery && typeof $('#pricipal-slide').slider === 'function') {
					$('#pricipal-slide').slider('value', principal);
				}
				if (window.jQuery && typeof $('#totalyear-slide').slider === 'function') {
					$('#totalyear-slide').slider('value', months);
				}
				if (window.jQuery && typeof $('#intrest-slide').slider === 'function') {
					$('#intrest-slide').slider('value', rateYear);
				}
			}

			function hookInputs() {
				var pInput = document.getElementById('pricipal-input');
				var mInput = document.getElementById('totalyear-input');
				['input', 'change', 'blur'].forEach(function (evt) {
					pInput.addEventListener(evt, recalc);
					mInput.addEventListener(evt, recalc);
				});
			}

			function hookSliders() {
				if (!window.jQuery || typeof $('#pricipal-slide').slider !== 'function') return;

				// Configure jQuery UI sliders to match new ranges
				$('#pricipal-slide').slider({
					range: "min",
					min: 0,
					max: MAX_PRINCIPAL,
					value: parseInt(document.getElementById('pricipal-input').value || 0, 10),
					step: 100,
					slide: function(e, ui){ document.getElementById('pricipal-input').value = ui.value; recalc(); }
				});
				$('#totalyear-slide').slider({
					range: "min",
					min: 1,
					max: MAX_MONTHS,
					value: parseInt(document.getElementById('totalyear-input').value || 1, 10),
					step: 1,
					slide: function(e, ui){ document.getElementById('totalyear-input').value = ui.value; recalc(); }
				});
				$('#intrest-slide').slider({
					range: "min",
					min: FIXED_INTEREST_RATE,
					max: FIXED_INTEREST_RATE,
					value: FIXED_INTEREST_RATE,
					step: 0.1,
					disabled: true
				});
			}

			window.addEventListener('load', function () {
				// Initialize inputs to match new business rules
				var pEl = document.getElementById('pricipal-input');
				var mEl = document.getElementById('totalyear-input');
				var rEl = document.getElementById('intrest-input');

				// default to maximum example state if empty
				pEl.value = clampPrincipal(parseNumber(pEl.value, MAX_PRINCIPAL));
				mEl.value = clampMonths(parseNumber(mEl.value, MAX_MONTHS));
				rEl.value = FIXED_INTEREST_RATE;

				// hook events and sliders
				hookInputs();
				hookSliders();

				// initial calc
				recalc();
			});
		})();
	</script>
</body>
</html>
